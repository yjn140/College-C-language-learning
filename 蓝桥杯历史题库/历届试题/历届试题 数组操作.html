<head>
    <meta charset="UTF-8">
<title>历届试题 数组操作</title>
<link rel="stylesheet" href="../css/main.css">
</head>
 <div>问题描述</div><div><br></div><div>给出一个长度为 n 的数组 {A_i}，由 1 到 n 标号 ， 你需要维护 m 个操作。</div><div>操作分为三种，输入格式为：</div><div><br></div><div>1 l r d，将数组中下标 l 到 r 的位置都加上 d，即对于 l&lt;=i&lt;=r，执行A_i=A_i+d。</div><div><br></div><div>2 l_1 r_1 l_2 r_2，将数组中下标为 l_1 到 r_1 的位置，赋值成 l_2 到 r_2 的值，保证 r_1-l_1=r_2-l_2。&nbsp;</div><div>换句话说先对 0&lt;=i&lt;=r_2-l_2 执行 B_i=A_(l_2+i)，再对 0&lt;=i&lt;=r_1-l_1 执行 A_(l_1+i)=B_i，其中 {B_i} 为一个临时数组。</div><div><br></div><div>3 l r，求数组中下标 l 到 r 的位置的和，即求出 ∑_(i=l到r) A_i 。</div><div><br></div><div>输入格式</div><div>从标准输入读入数据。</div><div>第一行一个整数 Case，表示测试点编号，其中 Case=0 表示该点为样例。</div><div>第二行包含两个整数 n,m。保证 1&lt;=n,m&lt;=10^5。</div><div>第三行包含 n 个整数 A_i，表示这个数组的初值。保证 0&lt;=A_i&lt;=10^5。</div><div>接下来 m 每行描述一个操作，格式如问题描述所示。</div><div>对于操作中提到每个数，满足 0&lt;=d&lt;=10^5，1&lt;=l&lt;=r&lt;=n，1&lt;=l_1&lt;=r_1&lt;=n，1&lt;=l_2&lt;=r_2&lt;=n，r_1-l_1=r_2-l_2。</div><div><br></div><div>输出格式</div><div>输出到标准输出。</div><div>对于每次 3 操作输出一行一个数，表示求和的结果。</div><div><br></div><div><br></div><div>样例输入</div><div>0</div><div>5 6</div><div>1 2 3 4 5</div><div>2 1 3 3 5</div><div>3 3 5</div><div>1 2 4 2</div><div>3 3 5</div><div>2 1 3 3 5</div><div>3 1 5</div><div><br></div><div>样例输出</div><div>14</div><div>18</div><div>29</div><div><br></div><div>数据规模与约定</div><div><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="border: none;">
 <tbody><tr>
  <td valign="top" style="border:solid windowtext 1.0pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left"><span style="font-family: 微软雅黑, sans-serif;">测试点<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td valign="top" style="border:solid windowtext 1.0pt;border-left:none;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left"><span lang="EN-US" style="font-family: 微软雅黑, sans-serif;">n,m<o:p></o:p></span></p>
  </td>
  <td valign="top" style="border:solid windowtext 1.0pt;border-left:none;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left"><span style="font-family: 微软雅黑, sans-serif;">其他约束<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr>
  <td valign="top" style="border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left"><span lang="EN-US" style="font-family: 微软雅黑, sans-serif;">1,2<o:p></o:p></span></p>
  </td>
  <td valign="top" style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left"><span lang="EN-US" style="font-family: 微软雅黑, sans-serif;">&lt;=10^3<o:p></o:p></span></p>
  </td>
  <td valign="top" style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left"><span style="font-family: 微软雅黑, sans-serif;">无<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr>
  <td valign="top" style="border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left"><span lang="EN-US" style="font-family: 微软雅黑, sans-serif;">3,4<o:p></o:p></span></p>
  </td>
  <td valign="top" style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left"><span lang="EN-US" style="font-family: 微软雅黑, sans-serif;">&lt;=10^5<o:p></o:p></span></p>
  </td>
  <td valign="top" style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left"><span style="font-family: 微软雅黑, sans-serif;">没有<span lang="EN-US">2</span>操作<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr>
  <td valign="top" style="border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left"><span lang="EN-US" style="font-family: 微软雅黑, sans-serif;">5,6,7<o:p></o:p></span></p>
  </td>
  <td valign="top" style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left"><span lang="EN-US" style="font-family: 微软雅黑, sans-serif;">&lt;=10^5<o:p></o:p></span></p>
  </td>
  <td valign="top" style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left"><span lang="EN-US" style="font-family: 微软雅黑, sans-serif;">n </span><span style="font-family: 微软雅黑, sans-serif;">为偶数，且所有<span lang="EN-US">2</span>操作满<span lang="EN-US">l_1=1,r_1=n/2&nbsp; ,l_2=n/2+1,r_2=n<o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr>
  <td valign="top" style="border:solid windowtext 1.0pt;border-top:none;
  mso-border-top-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left"><span lang="EN-US" style="font-family: 微软雅黑, sans-serif;">8,9,10<o:p></o:p></span></p>
  </td>
  <td valign="top" style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left"><span lang="EN-US" style="font-family: 微软雅黑, sans-serif;">&lt;=10^5<o:p></o:p></span></p>
  </td>
  <td valign="top" style="border-top:none;border-left:none;border-bottom:solid windowtext 1.0pt;
  border-right:solid windowtext 1.0pt;mso-border-top-alt:solid windowtext .5pt;
  mso-border-left-alt:solid windowtext .5pt;mso-border-alt:solid windowtext .5pt;
  padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left"><span style="font-family: 微软雅黑, sans-serif;">无<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
</tbody></table></div><div><br></div>